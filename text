#!/bin/bash

# Variables
DOCKER_IMAGE="zakariaaz/tp4-app"
TAG="latest"

# Build Docker image
echo "Building Docker image..."
docker build -t ${DOCKER_IMAGE}:${TAG} .

# Login to Docker Hub
echo "Logging into Docker Hub..."
echo "${DOCKER_HUB_PASSWORD}" | docker login -u "${DOCKER_HUB_USERNAME}" --password-stdin

# Push image to Docker Hub
echo "Pushing image to Docker Hub..."
docker push ${DOCKER_IMAGE}:${TAG}

# Cleanup local images (optional)
echo "Cleaning up..."
docker rmi ${DOCKER_IMAGE}:${TAG} || true

echo "Build and push completed successfully!"


